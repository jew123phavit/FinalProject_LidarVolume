# р╣Вр╕Др╕гр╕Зр╕Зр╕▓р╕Щ: р╕Бр╕▓р╕гр╕зр╕▒р╕Фр╕Ыр╕гр╕┤р╕бр╕▓р╕Хр╕гр╕Вр╕нр╕Зр╣Бр╕Вр╣Зр╕Зр╣Гр╕Щр╣Др╕Лр╣Вр╕ер╕Фр╣Йр╕зр╕в LiDAR (Volume measurement of bulk solids inside the Silo with LiDAR)

р╣Ар╕нр╕Бр╕кр╕▓р╕гр╕Йр╕Ър╕▒р╕Ър╕Щр╕╡р╣Йр╕кр╕гр╕╕р╕Ыр╕нр╕Зр╕Др╣Мр╕Др╕зр╕▓р╕бр╕гр╕╣р╣Йр╣Бр╕ер╕░р╕Бр╕▓р╕гр╕Юр╕▒р╕Тр╕Щр╕▓р╕Чр╕╡р╣Ир╕кр╕│р╕Др╕▒р╕Нр╕Вр╕нр╕Зр╕гр╕░р╕Ър╕Ър╕Лр╕нр╕Яр╕Хр╣Мр╣Бр╕зр╕гр╣М (ROS 2) р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Вр╕Др╕гр╕Зр╕Зр╕▓р╕Щр╕Бр╕▓р╕гр╕зр╕▒р╕Фр╕Ыр╕гр╕┤р╕бр╕▓р╕Хр╕гр╕Вр╕нр╕Зр╣Бр╕Вр╣Зр╕Зр╣Гр╕Щр╣Др╕Лр╣Вр╕ер╕Фр╣Йр╕зр╕в LiDAR

---

## ЁЯУМ р╕кр╕гр╕╕р╕Ыр╕Бр╕▓р╕гр╕Юр╕▒р╕Тр╕Щр╕▓р╣Бр╕ер╕░р╕нр╕Зр╕Др╣Мр╕Др╕зр╕▓р╕бр╕гр╕╣р╣Й

р╕Ир╕▓р╕Бр╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕гр╣Ир╕зр╕бр╕Бр╕▒р╕Щ р╣Ар╕гр╕▓р╣Др╕Фр╣Йр╕вр╕Бр╕гр╕░р╕Фр╕▒р╕Ър╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Лр╕нр╕Яр╕Хр╣Мр╣Бр╕зр╕гр╣Мр╕Вр╕нр╕Зр╣Вр╕Др╕гр╕Зр╕Зр╕▓р╕Щр╣Гр╕лр╣Йр╕бр╕╡р╕Др╕зр╕▓р╕бр╕вр╕╖р╕Фр╕лр╕вр╕╕р╣Ир╕Щ р╣Ар╕Ыр╣Зр╕Щр╕бр╕▓р╕Хр╕гр╕Рр╕▓р╕Щ р╣Бр╕ер╕░р╕Юр╕гр╣Йр╕нр╕бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Хр╣Ир╕нр╕вр╕нр╕Фр╕кр╕╣р╣Ир╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Ир╕гр╕┤р╕З р╣Вр╕Фр╕вр╕бр╕╡р╕Ыр╕гр╕░р╣Ар╕Фр╣Зр╕Щр╕кр╕│р╕Др╕▒р╕Нр╕Фр╕▒р╕Зр╕Щр╕╡р╣Й:

### 1. р╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Юр╕▓р╕гр╕▓р╕бр╕┤р╣Ар╕Хр╕нр╕гр╣Мр╣Бр╕Ър╕Ъ Real-time р╕Фр╣Йр╕зр╕в Parameter Callbacks

* **р╕Ыр╕▒р╕Нр╕лр╕▓р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ:** р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╕Юр╕▓р╕гр╕▓р╕бр╕┤р╣Ар╕Хр╕нр╕гр╣М (р╣Ар╕Кр╣Ир╕Щ `home_offset`) р╕Фр╣Йр╕зр╕вр╕Др╕│р╕кр╕▒р╣Ир╕З `ros2 param set` р╣Др╕бр╣Ир╕бр╕╡р╕Ьр╕ер╕Бр╕▒р╕Ъ Node р╕Чр╕╡р╣Ир╕Бр╕│р╕ер╕▒р╕Зр╕Чр╕│р╕Зр╕▓р╕Щр╕нр╕вр╕╣р╣Ир╕Чр╕▒р╕Щр╕Чр╕╡
* **р╕кр╕▓р╣Ар╕лр╕Хр╕╕:** Node р╣Гр╕Щ ROS 2 р╕Ир╕░р╕нр╣Ир╕▓р╕Щр╕Др╣Ир╕▓р╕Юр╕▓р╕гр╕▓р╕бр╕┤р╣Ар╕Хр╕нр╕гр╣Мр╣Бр╕Др╣Ир╕Др╕гр╕▒р╣Йр╕Зр╣Ар╕Фр╕╡р╕вр╕зр╕Хр╕нр╕Щр╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕Чр╕│р╕Зр╕▓р╕Щ
* **тЬЕ р╕Чр╕▓р╕Зр╕нр╕нр╕Б:** р╣Ар╕гр╕▓р╣Др╕Фр╣Йр╕Щр╕│ **Parameter Callbacks** р╕бр╕▓р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ р╕Лр╕╢р╣Ир╕Зр╣Ар╕Ыр╣Зр╕Щр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕Чр╕╡р╣Ир╕Ир╕░р╕Цр╕╣р╕Бр╣Ар╕гр╕╡р╕вр╕Бр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Ар╕бр╕╖р╣Ир╕нр╕Юр╕▓р╕гр╕▓р╕бр╕┤р╣Ар╕Хр╕нр╕гр╣Мр╕бр╕╡р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З р╕Чр╕│р╣Гр╕лр╣Й Node р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Др╣Ир╕▓р╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╣Бр╕Ър╕Ъ Real-time р╣Вр╕Фр╕вр╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╕гр╕╡р╕кр╕Хр╕▓р╕гр╣Мр╕Ч Node р╕Лр╕╢р╣Ир╕Зр╣Др╕Фр╣Йр╕Щр╕│р╣Др╕Ыр╕Ыр╕гр╕▒р╕Ър╣Гр╕Кр╣Йр╕Бр╕▒р╕Ър╕Чр╕▒р╣Йр╕З `encoder_node` р╣Бр╕ер╕░ `controller_node`

---

### 2. р╕вр╕Бр╕гр╕░р╕Фр╕▒р╕Ъ `controller_node` р╣Гр╕лр╣Йр╕бр╕╡р╕Др╕зр╕▓р╕бр╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╕╣р╕Зр╕Вр╕╢р╣Йр╕Щ

р╣Ар╕гр╕▓р╣Др╕Фр╣Йр╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕З `controller_node.py` р╣Бр╕ер╕░ `motor_config.yaml` р╕Др╕гр╕▒р╣Йр╕Зр╣Гр╕лр╕Нр╣Ир╣Ар╕Юр╕╖р╣Ир╕нр╕Хр╕нр╕Ър╣Вр╕Ир╕Чр╕вр╣Мр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Ир╕гр╕┤р╕Зр╕бр╕▓р╕Бр╕Вр╕╢р╣Йр╕Щ 3 р╕Вр╣Йр╕н:

* **р╕Др╕зр╕Ър╕Др╕╕р╕бр╕Чр╕┤р╕ир╕Чр╕▓р╕З:** р╕кр╕гр╣Йр╕▓р╕З Topic р╣Гр╕лр╕бр╣И (`/move_relative`) р╣Ар╕Юр╕╖р╣Ир╕нр╕гр╕▒р╕Ър╕Др╕│р╕кр╕▒р╣Ир╕Зр╕лр╕бр╕╕р╕Щр╣Бр╕Ър╕Ър╕кр╕▒р╕бр╕Юр╕▒р╕Чр╕Шр╣М (Relative) р╣Вр╕Фр╕вр╣Гр╕Кр╣Йр╕Др╣Ир╕▓ **р╕Ър╕зр╕Б** р╕кр╕│р╕лр╕гр╕▒р╕Ър╕лр╕бр╕╕р╕Щр╕Хр╕▓р╕бр╣Ар╕Вр╣Зр╕б р╣Бр╕ер╕░ **р╕ер╕Ъ** р╕кр╕│р╕лр╕гр╕▒р╕Ър╕лр╕бр╕╕р╕Щр╕Чр╕зр╕Щр╣Ар╕Вр╣Зр╕б
* **р╕Др╕зр╕Ър╕Др╕╕р╕бр╕Др╕зр╕▓р╕бр╣Ар╕гр╣Зр╕з:** р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Ир╕▓р╕Бр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Др╣Ир╕▓ `delay` р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕Кр╕▒р╕Фр╣Ар╕Ир╕Щ р╕бр╕▓р╣Ар╕Ыр╣Зр╕Щр╕Бр╕▓р╕гр╕Бр╕│р╕лр╕Щр╕Фр╕Др╕зр╕▓р╕бр╣Ар╕гр╣Зр╕зр╣Гр╕Щр╕лр╕Щр╣Ир╕зр╕в **р╕нр╕Зр╕ир╕▓р╕Хр╣Ир╕нр╕зр╕┤р╕Щр╕▓р╕Чр╕╡ (deg/s)** р╕Лр╕╢р╣Ир╕Зр╣Ар╕Вр╣Йр╕▓р╣Гр╕Ир╕Зр╣Ир╕▓р╕вр╣Бр╕ер╕░р╣Ар╕Ыр╣Зр╕Щр╕бр╕▓р╕Хр╕гр╕Рр╕▓р╕Щ
* **р╕Кр╕Фр╣Ар╕Кр╕вр╕бр╕╕р╕бр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З:** р╣Ар╕Юр╕┤р╣Ир╕бр╕Юр╕▓р╕гр╕▓р╕бр╕┤р╣Ар╕Хр╕нр╕гр╣М `target_offset_deg` р╣Ар╕Юр╕╖р╣Ир╕нр╕Кр╕Фр╣Ар╕Кр╕вр╕Др╕зр╕▓р╕бр╕Др╕ер╕▓р╕Фр╣Ар╕Др╕ер╕╖р╣Ир╕нр╕Щр╕Ир╕▓р╕Бр╕Бр╕▓р╕гр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╕Чр╕▓р╕Зр╕Бр╕▓р╕вр╕ар╕▓р╕Ю р╕Чр╕│р╣Гр╕лр╣Йр╕Бр╕▓р╕гр╕Ыр╕гр╕▒р╕Ър╣Ар╕Чр╕╡р╕вр╕Ър╕гр╕░р╕Ър╕Ъ (Calibration) р╕Чр╕│р╣Др╕Фр╣Йр╕Зр╣Ир╕▓р╕вр╕Ьр╣Ир╕▓р╕Щр╕Лр╕нр╕Яр╕Хр╣Мр╣Бр╕зр╕гр╣М

---

### 3. р╕кр╕Цр╕▓р╕Ыр╕▒р╕Хр╕вр╕Бр╕гр╕гр╕бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕нр╕Щр╕▓р╕Др╕Х: р╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕Бр╕▒р╕Ъ GUI р╕Ьр╣Ир╕▓р╕Щ MQTT Bridge

* **р╣Бр╕Щр╕зр╕Др╕┤р╕Ф:** р╣Ар╕Хр╕гр╕╡р╕вр╕бр╕Юр╕гр╣Йр╕нр╕бр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕гр╕░р╕Ър╕Ър╕Бр╕▒р╕Ъ GUI р╕лр╕гр╕╖р╕нр╕гр╕░р╕Ър╕Ър╕ар╕▓р╕вр╕Щр╕нр╕Бр╕Ьр╣Ир╕▓р╕Щр╣Вр╕Ыр╕гр╣Вр╕Хр╕Др╕нр╕е MQTT р╕Лр╕╢р╣Ир╕Зр╣Ар╕Ыр╣Зр╕Щр╕бр╕▓р╕Хр╕гр╕Рр╕▓р╕Щр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Зр╕▓р╕Щ IoT
* **р╕кр╕Цр╕▓р╕Ыр╕▒р╕Хр╕вр╕Бр╕гр╕гр╕бр╕Чр╕╡р╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З:** р╣Бр╕Чр╕Щр╕Чр╕╡р╣Ир╕Ир╕░р╣Гр╕Кр╣Й MQTT р╕кр╕▒р╣Ир╕Зр╕гр╕▒р╕Щ Shell Script (р╕Лр╕╢р╣Ир╕Зр╕Кр╣Йр╕▓р╣Бр╕ер╕░р╣Др╕бр╣Ир╕Ыр╕ер╕нр╕Фр╕ар╕▒р╕в) р╣Ар╕гр╕▓р╣Др╕Фр╣Йр╕нр╕нр╕Бр╣Бр╕Ър╕Ъ **MQTT Bridge Node**
* **р╕лр╕Щр╣Йр╕▓р╕Чр╕╡р╣И:** Node р╕Щр╕╡р╣Йр╕Чр╕│р╕лр╕Щр╣Йр╕▓р╕Чр╕╡р╣Ир╣Ар╕Ыр╣Зр╕Щ **"р╕кр╕░р╕Юр╕▓р╕Щ"** р╣Бр╕Ыр╕ер╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Ир╕▓р╕Б MQTT (р╣Гр╕Щр╕гр╕╣р╕Ыр╣Бр╕Ър╕Ъ JSON) р╣Др╕Ыр╣Ар╕Ыр╣Зр╕Щр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Чр╕╡р╣Ир╕гр╕░р╕Ър╕Ъ ROS 2 р╣Ар╕Вр╣Йр╕▓р╣Гр╕И (ROS 2 Topics/Services)
* **р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣М:** р╕Чр╕│р╣Гр╕лр╣Йр╕гр╕░р╕Ър╕Ър╣Ар╕Ыр╣Зр╕Щр╕кр╕▒р╕Фр╕кр╣Ир╕зр╕Щ (Modular), р╕бр╕╡р╕Ыр╕гр╕░р╕кр╕┤р╕Чр╕Шр╕┤р╕ар╕▓р╕Юр╕кр╕╣р╕З, р╕Ыр╕ер╕нр╕Фр╕ар╕▒р╕в р╣Бр╕ер╕░р╕Зр╣Ир╕▓р╕вр╕Хр╣Ир╕нр╕Бр╕▓р╕гр╕Щр╕│р╣Др╕Ыр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕Бр╕▒р╕Ър╕гр╕░р╕Ър╕Ър╕ар╕▓р╕вр╕Щр╕нр╕Бр╕нр╕╖р╣Ир╕Щр╣Ж

---

### 4. р╕Бр╕▓р╕гр╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╣Вр╕Др╣Йр╕Фр╣Вр╕Фр╕вр╕гр╕зр╕бр╣Гр╕лр╣Йр╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М

* **`start_control.launch.py`:** р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╣Др╕Яр╕ер╣М Launch р╣Гр╕лр╣Йр╕кр╕▓р╕бр╕▓р╕гр╕Цр╕гр╕▒р╕Щр╕Чр╕╕р╕Б Node р╕Чр╕╡р╣Ир╕Ир╕│р╣Ар╕Ыр╣Зр╕Щр╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕░р╕Ър╕Ър╕Др╕зр╕Ър╕Др╕╕р╕б (`encoder_node`, `controller_node`, `mqtt_bridge_node`) р╣Др╕Фр╣Йр╕Фр╣Йр╕зр╕вр╕Др╕│р╕кр╕▒р╣Ир╕Зр╣Ар╕Фр╕╡р╕вр╕з
* **р╕Др╕зр╕▓р╕бр╣Ар╕Вр╣Йр╕▓р╣Гр╕Ир╣Ар╕Кр╕┤р╕Зр╕ер╕╢р╕Б:** р╕Чр╕│р╕Др╕зр╕▓р╕бр╣Ар╕Вр╣Йр╕▓р╣Гр╕Ир╕Др╕зр╕▓р╕бр╣Бр╕Хр╕Бр╕Хр╣Ир╕▓р╕Зр╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕нр╣Зр╕нр╕Ър╣Ар╕Ир╕Бр╕Хр╣М `rclpy.parameter.Parameter` (р╕Хр╕▒р╕зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Юр╕▓р╕гр╕▓р╕бр╕┤р╣Ар╕Хр╕нр╕гр╣М) р╣Бр╕ер╕░ `rcl_interfaces.msg.SetParametersResult` (р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Бр╕▓р╕гр╕Хр╕нр╕Ър╕Бр╕ер╕▒р╕Ъ) р╕Лр╕╢р╣Ир╕Зр╣Ар╕Ыр╣Зр╕Щр╕лр╕▒р╕зр╣Гр╕Ир╕кр╕│р╕Др╕▒р╕Нр╕Вр╕нр╕Зр╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ Parameter Callback

---

> **р╣Вр╕Фр╕вр╕кр╕гр╕╕р╕Ы:** р╕Ир╕▓р╕Бр╕Ир╕╕р╕Фр╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕Чр╕╡р╣Ир╣Ар╕Ыр╣Зр╕Щр╕Ыр╕▒р╕Нр╕лр╕▓р╣Ар╕ер╣Зр╕Бр╕Щр╣Йр╕нр╕в р╣Ар╕гр╕▓р╣Др╕Фр╣Йр╕гр╣Ир╕зр╕бр╕Бр╕▒р╕Щр╕Юр╕▒р╕Тр╕Щр╕▓р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Лр╕нр╕Яр╕Хр╣Мр╣Бр╕зр╕гр╣Мр╕Вр╕нр╕Зр╣Вр╕Др╕гр╕Зр╕Зр╕▓р╕Щр╣Гр╕лр╣Йр╕бр╕╡р╕Др╕зр╕▓р╕бр╕кр╕▓р╕бр╕▓р╕гр╕Цр╕кр╕╣р╕З, р╣Ар╕Ыр╣Зр╕Щр╕бр╕▓р╕Хр╕гр╕Рр╕▓р╕Щр╕нр╕╕р╕Хр╕кр╕▓р╕лр╕Бр╕гр╕гр╕б, р╣Бр╕ер╕░р╕Юр╕гр╣Йр╕нр╕бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Хр╣Ир╕нр╕вр╕нр╕Фр╣Др╕Ыр╕кр╕╣р╣Ир╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Ир╕гр╕┤р╕Зр╣Др╕Фр╣Йр╕нр╕вр╣Ир╕▓р╕Зр╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М
